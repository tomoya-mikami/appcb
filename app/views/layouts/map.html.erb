<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
  <%= stylesheet_link_tag "project/map", :media => "all" %>
	<title><%= @project.name %>/map</title>
</head>
<body>
  <div class="container">
    <div class="modal fade" id="success_modal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">送信しました</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
          <!-- Modal body -->
          <div class="modal-body">
              <p>位置情報を送信しました。ご協力ありがとうございます。</p>
          </div>
          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">閉じる</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="error_modal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">送信に失敗しました</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
          <!-- Modal body -->
          <div class="modal-body" id="error-modal-body"></div>
          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">閉じる</button>
          </div>
        </div>
      </div>
    </div>
    <div class="row" style="width: 100%;height: 100vh">
        <div id="mapform" class="col-8">
            <div id="map" style="width: 100%;height: 100vh;"></div>
        </div>
        <div id="addressform" class="col-4 addressform">
            <div id="formexplain">
                〇 × △のマーカーの位置を探しています. ご協力よろしくお願いいたします.</br>
                1. 見つけたマーカーを選択(選択すると背景が青くなります)</br>
                2. 地図上のマーカーのあった位置をタッチ</br>
                3. 間違えがなければ送信</br>
            </div>
            <input type="hidden" name="lat" id="lat">
            <input type="hidden" name="lng" id="lng">
            <input type="hidden" name="disaster_id" id="disaster_id" value="1">
            <table id="disaster_table" class="table table-bordered"></table>
            <div name="description">
              スタッフ用コメントボックス : <input type="text" name="description" id="description" class="form-control" placeholder="何か報告することがあれば入力してください">
            </div>
            <div name="submit">
              <button type="button" id="pos_send" class="btn btn-primary btn-lg btn-block">送信</button>
            </div></br>
            <div>
              <button onclick="VisibleGetMarker()" class="btn btn-primary btn-lg btn-block" style="width: 100%">現在集まっているデータを表示する</button>
              <button onclick="UnVisibleGetMarker()" class="btn btn-danger btn-lg btn-block" style="width: 100%">現在集まっているデータを非表示にする</button></br>
              <button onclick="move_default_point()" class="btn btn-primary btn-lg btn-block" style="width: 100%">小池小学校に移動する</button>
            </div>
        </div>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
  <%= javascript_include_tag "map.js" %>
  <script>initToken("<%= @project.token %>", "<%= @project.google_map_api_key %>")</script>
  <script src="https://maps.googleapis.com/maps/api/js?key=<%= @project.google_map_api_key %>&callback=initMap" async defer></script>
</body>
</html>